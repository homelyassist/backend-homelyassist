<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Registration Form</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <!-- Favicons -->
    <link th:href="@{/assets/img/homelyAssistlogo.jpg}" rel="icon">
    <link th:href="@{/assets/img/apple-touch-icon.png}" rel="apple-touch-icon">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Cardo:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <!-- Vendor CSS Files -->
    <link th:href="@{/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/assets/vendor/bootstrap-icons/bootstrap-icons.css}" rel="stylesheet">
    <link th:href="@{/assets/vendor/swiper/swiper-bundle.min.css}" rel="stylesheet">
    <link th:href="@{/assets/vendor/glightbox/css/glightbox.min.css}" rel="stylesheet">
    <link th:href="@{/assets/vendor/aos/aos.css}" rel="stylesheet">
    <!-- Template Main CSS File -->
    <link th:href="@{/assets/css/main.css}" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        /* Style for buttons */
        .btn-get-started {
            background-color: #6cb83a;
            /* Green theme */
            color: #ffffff;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .btn-get-started:hover {
            background-color: #f5cb42;
            /* Yellow theme on hover */
        }

        .btn-otp {
            color: #6cb83a;
            /* Green theme */
            font-weight: bold;
            text-decoration: underline;
            transition: color 0.3s ease;
        }

        .btn-otp:hover {
            color: #f5cb42;
            /* Yellow theme on hover */
        }

        /* Adjust button layout */
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Center the form */
        #registration-form {
            text-align: center;
            padding: 50px 0;
        }

        /* Adjust form layout */
        #registration-form .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        #registration-form label {
            font-weight: bold;
        }

        /* Style section title */
        .section-title h2 {
            font-size: 32px;
            font-weight: bold;
            color: #6cb83a;
            margin-bottom: 30px;
        }

        /* Style form inputs */
        .form-control {
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 16px;
        }

        /* Style form select */
        select.form-control {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%236cb83a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path d="M12 16l-6-6h12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }

        /* Style file input */
        input[type="file"].form-control {
            border: 1px solid #ced4da;
            background-color: transparent;
            padding: 10px 20px;
        }

        /* Style checkboxes */
        .checkbox-container {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .checkbox-item {
            margin-right: 20px;
        }
    </style>
</head>

<body>

    <!-- ======= Registration Form Section ======= -->
    <section id="registration-form" class="registration-form">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="section-title" data-aos="fade-up">
                        <h2>Fill below details to Register</h2>
                    </div>
                    <form action="#" method="post" role="form" class="php-email-form" data-aos="fade-up">
                        <div class="row">
                            <div class="col-md-6 form-group">
                                <label for="fullname">Full Name</label>
                                <input type="text" name="fullname" class="form-control" id="fullname"
                                    placeholder="Full Name" maxlength="22" required>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="address">Address</label>
                                <input type="text" name="address" class="form-control" id="address"
                                    placeholder="Address" maxlength="50" required>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="address">Landmark</label>
                                <input type="text" name="landmark" class="form-control" id="landmark"
                                    placeholder="Landmark">
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="village">Village/Area/City</label>
                                <input type="text" name="village" class="form-control" id="village"
                                    placeholder="Village/Area/City" maxlength="22" required>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="pin">Pin</label>
                                <input type="text" name="pin" class="form-control" id="pin" placeholder="Pin" required>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="district">District</label>
                                <input type="text" name="district" class="form-control" id="district"
                                       placeholder="District" maxlength="22" required readonly>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="state">State</label>
                                <input type="text" name="state" class="form-control" id="state"
                                       placeholder="State" maxlength="22" required readonly>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="category">Category</label>
                                <select name="category" id="category" class="form-control" required>
                                    <option value="" selected>Select the Category</option>
                                    <option value="agriculture_assist">Agriculture Assist</option>
                                    <option value="electrical_assist">Electrical Assist</option>
                                    <option value="health_assist">Health Assist</option>
                                </select>
                            </div>
                            <div class="col-md-6 form-group sub-category" id="subCategoryContainer" style="display: none;">
                                <label for="subcategory">Sub-Category</label>
                                <div class="checkbox-container" id="subCategoryOptions">
                                    <!-- Sub-categories will be dynamically added here based on selection -->
                                </div>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="description">Description</label>
                                <textarea name="description" class="form-control" id="description" placeholder="Description" maxlength="70" required></textarea>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="description">Experience</label>
                                <input type="number" name="experience" class="form-control" id="experience"
                                    placeholder="Experience" required min="0" max="30">
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="photo">Photo</label>
                                <input type="file" name="photo" class="form-control" id="photo" placeholder="Photo"
                                    accept="image/*" required>
                            </div>
                            <div class="col-md-12 form-group">
                                <label for="mobile">Mobile Number</label>
                                <input type="tel" name="mobile" class="form-control" id="mobile"
                                    placeholder="Mobile Number" required maxlength="10">
                            </div>
                            <div class="col-md-12 form-group">
                                <input type="text" name="otp" class="form-control" id="otp" placeholder="Enter OTP"
                                    required>
                            </div>
                            <div class="col-md-12 form-group">
                                <div>
                                    <span id="otpDisplay"></span>
                                </div>
                            </div>
                            <div class="col-md-12 form-group">
                                <button type="button" class="btn btn-primary" id="otpButton"
                                    onclick="generateOtp()">Generate OTP</button>
                                <span id="timer"></span>
                            </div>
                            <div class="col-md-12 btn-container">
                                <button type="submit" class="btn btn-success" onclick="registerAssist()">Save</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section><!-- End Registration Form Section -->

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="copyright">
                        &copy; Copyright <strong><span>homelyAssist</span></strong>. All Rights Reserved
                    </div>
                    <div class="credits">
                        Designed by <a href="/team">homelyAssistTeam</a>
                    </div>
                </div>
            </div>
        </div>
    </footer><!-- End Footer -->

    <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <div id="preloader">
        <div class="line"></div>
    </div>

    <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="/assets/vendor/aos/aos.js"></script>
    <script src="/assets/vendor/php-email-form/validate.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/otp.js"></script>
    <script src="/assets/js/assist.js"></script>
    <script src="/assets/js/utils.js"></script>
    <script>
        document.getElementById('pin').addEventListener('input', async function() {
            const pincode = this.value;
            try {
                const data = await getInfoForPinCode(pincode);
                document.getElementById('district').value = data.district;
                document.getElementById('state').value = data.state;
            } catch (error) {
                document.getElementById('district').value = "";
                document.getElementById('state').value = "";
            }
        });

document.addEventListener("DOMContentLoaded", function() {
    // Add event listener to category select element
    document.getElementById('category').addEventListener('change', function() {
        toggleSubCategory();
    });
});

function toggleSubCategory() {
    var category = document.getElementById('category').value.toLowerCase(); // Convert category to lowercase for consistent comparison
    var subCategoryContainer = document.getElementById('subCategoryContainer');
    var subCategoryOptions = document.getElementById('subCategoryOptions');

    // Clear previously selected sub-categories
    subCategoryOptions.innerHTML = '';

    // Check the selected category
    if (category === 'electrical_assist') {
        subCategoryContainer.style.display = 'none'; // Hide sub-category container
    } else if (category === 'health_assist') {
        subCategoryContainer.style.display = 'block'; // Show sub-category container
        // Add sub-category options for Health Assist
        var subCategories = ['Nurse', 'Caretaker for old people and kids', 'Pathlab'];
        subCategories.forEach(function (subcategory) {
            var checkboxItem = document.createElement('div');
            checkboxItem.classList.add('checkbox-item');
            checkboxItem.innerHTML = `
                <input type="checkbox" id="${subcategory.toLowerCase().replace(/\s/g, '_')}" name="assist_type" value="${subcategory.toLowerCase().replace(/\s/g, '_')}">
                <label for="${subcategory.toLowerCase().replace(/\s/g, '_')}">${subcategory}</label>
            `;
            subCategoryOptions.appendChild(checkboxItem);
        });
    } else if (category === 'agriculture_assist') {
        subCategoryContainer.style.display = 'block'; // Show sub-category container
        // Add sub-category options for Agriculture Assist
        var subCategories = ['Agriculture', 'Farm Land Maintenance', 'Wood Cutting', 'Tractor/Power Tiller rent', 'Animal Selling'];
        subCategories.forEach(function (subcategory) {
            var checkboxItem = document.createElement('div');
            checkboxItem.classList.add('checkbox-item');
            checkboxItem.innerHTML = `
                <input type="checkbox" id="${subcategory.toLowerCase().replace(/\s/g, '_')}" name="assist_type" value="${subcategory.toLowerCase().replace(/\s/g, '_')}">
                <label for="${subcategory.toLowerCase().replace(/\s/g, '_')}">${subcategory}</label>
            `;
            subCategoryOptions.appendChild(checkboxItem);
        });
    } else {
        subCategoryContainer.style.display = 'none'; // Hide sub-category container for other categories
    }
}

    </script>

</body>

</html>